# é¡¹ç›®æ–‡ä»¶ç»„ç»‡è§„èŒƒ

## ğŸ“‹ æ¦‚è¿°
æœ¬æ–‡æ¡£å®šä¹‰äº† Little Knight Adventure é¡¹ç›®çš„æ–‡ä»¶ç»„ç»‡è§„èŒƒï¼Œç¡®ä¿é¡¹ç›®ç»“æ„æ¸…æ™°ã€æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚

---

## ğŸ“ æ¨èçš„é¡¹ç›®ç»“æ„

```
little_knight_adventure_v0.5/
â”œâ”€â”€ assets/                    # æ¸¸æˆèµ„æºæ–‡ä»¶ï¼ˆä¸åŒ…å«ä»£ç ï¼‰
â”‚   â”œâ”€â”€ audio/                 # éŸ³æ•ˆå’ŒéŸ³ä¹
â”‚   â”œâ”€â”€ fonts/                 # å­—ä½“æ–‡ä»¶
â”‚   â”œâ”€â”€ images/                # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ shaders/               # ç€è‰²å™¨
â”‚   â””â”€â”€ textures/              # çº¹ç†å›¾é›†
â”‚
â”œâ”€â”€ scripts/                   # æ‰€æœ‰è„šæœ¬æ–‡ä»¶ï¼ˆç»Ÿä¸€å°å†™ï¼‰
â”‚   â”œâ”€â”€ autoload/              # è‡ªåŠ¨åŠ è½½çš„å•ä¾‹è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ global_data.gd
â”‚   â”‚   â”œâ”€â”€ save_system.gd
â”‚   â”‚   â””â”€â”€ trade_item_list.gd
â”‚   â”‚
â”‚   â”œâ”€â”€ actors/                # è§’è‰²/å®ä½“è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ player/            # ç©å®¶ç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ player.gd
â”‚   â”‚   â”‚   â”œâ”€â”€ player_health.gd
â”‚   â”‚   â”‚   â””â”€â”€ states/        # ç©å®¶çŠ¶æ€æœº
â”‚   â”‚   â”‚       â”œâ”€â”€ player_state.gd
â”‚   â”‚   â”‚       â”œâ”€â”€ idle.gd
â”‚   â”‚   â”‚       â”œâ”€â”€ run.gd
â”‚   â”‚   â”‚       â””â”€â”€ jump.gd
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ enemies/           # æ•Œäººè„šæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ bat.gd
â”‚   â”‚   â”‚   â”œâ”€â”€ slime.gd
â”‚   â”‚   â”‚   â”œâ”€â”€ slime_boss.gd
â”‚   â”‚   â”‚   â””â”€â”€ bat_spawner.gd
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ npc/               # NPCè„šæœ¬
â”‚   â”‚       â”œâ”€â”€ shop_keeper.gd
â”‚   â”‚       â”œâ”€â”€ npc.gd
â”‚   â”‚       â””â”€â”€ knight.gd
â”‚   â”‚
â”‚   â”œâ”€â”€ components/            # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ health_component.gd
â”‚   â”‚   â”œâ”€â”€ damage_area.gd
â”‚   â”‚   â””â”€â”€ interaction_area.gd
â”‚   â”‚
â”‚   â”œâ”€â”€ items/                 # é“å…·/ç‰©å“è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ coin.gd
â”‚   â”‚   â”œâ”€â”€ health_potion.gd
â”‚   â”‚   â”œâ”€â”€ door.gd
â”‚   â”‚   â”œâ”€â”€ sword.gd
â”‚   â”‚   â””â”€â”€ treasure_box.gd
â”‚   â”‚
â”‚   â”œâ”€â”€ managers/              # ç®¡ç†å™¨è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ level_manager.gd
â”‚   â”‚   â”œâ”€â”€ game_manager.gd
â”‚   â”‚   â””â”€â”€ audio_manager.gd
â”‚   â”‚
â”‚   â”œâ”€â”€ traps/                 # é™·é˜±è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ spike.gd
â”‚   â”‚   â”œâ”€â”€ waterfall.gd
â”‚   â”‚   â”œâ”€â”€ platform.gd
â”‚   â”‚   â””â”€â”€ falling_block.gd
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                    # UIç›¸å…³è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ hud.gd
â”‚   â”‚   â”œâ”€â”€ shop_ui.gd
â”‚   â”‚   â”œâ”€â”€ chat_bubble.gd
â”‚   â”‚   â””â”€â”€ menu_ui.gd
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·è„šæœ¬
â”‚   â”‚   â””â”€â”€ create_animation.gd
â”‚   â”‚
â”‚   â””â”€â”€ levels/                # å…³å¡è„šæœ¬
â”‚       â”œâ”€â”€ shop.gd
â”‚       â”œâ”€â”€ dungeon.gd
â”‚       â””â”€â”€ boss_arena.gd
â”‚
â”œâ”€â”€ scenes/                    # åœºæ™¯æ–‡ä»¶ï¼ˆ.tscnï¼‰
â”‚   â”œâ”€â”€ actors/                # è§’è‰²åœºæ™¯
â”‚   â”‚   â”œâ”€â”€ player/
â”‚   â”‚   â”œâ”€â”€ enemies/
â”‚   â”‚   â””â”€â”€ npc/
â”‚   â”‚
â”‚   â”œâ”€â”€ items/                 # é“å…·åœºæ™¯
â”‚   â”œâ”€â”€ levels/                # å…³å¡åœºæ™¯
â”‚   â”œâ”€â”€ traps/                 # é™·é˜±åœºæ™¯
â”‚   â”œâ”€â”€ ui/                    # UIåœºæ™¯
â”‚   â””â”€â”€ components/            # ç»„ä»¶åœºæ™¯
â”‚
â”œâ”€â”€ tilesets/                  # ç“¦ç‰‡é›†èµ„æº
â”‚   â”œâ”€â”€ dungeon.tres
â”‚   â”œâ”€â”€ forest.tres
â”‚   â””â”€â”€ castle.tres
â”‚
â”œâ”€â”€ resources/                 # å…¶ä»–èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ themes/                # UIä¸»é¢˜
â”‚   â””â”€â”€ presets/               # é¢„è®¾é…ç½®
â”‚
â”œâ”€â”€ references/                # å¼€å‘æ–‡æ¡£
â”‚   â”œâ”€â”€ é¡¹ç›®æ–‡ä»¶ç»„ç»‡è§„èŒƒ.md
â”‚   â”œâ”€â”€ å•†åº—ç³»ç»Ÿå®ç°æ–‡æ¡£.md
â”‚   â””â”€â”€ 2DåŠ¨ç”»ç”Ÿæˆæ³¨æ„äº‹é¡¹.md
â”‚
â”œâ”€â”€ .gitignore                 # Gitå¿½ç•¥é…ç½®
â”œâ”€â”€ export_presets.cfg         # å¯¼å‡ºé¢„è®¾
â”œâ”€â”€ project.godot              # Godoté¡¹ç›®é…ç½®
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

---

## ğŸ“ å‘½åè§„èŒƒ

### æ–‡ä»¶å¤¹å‘½å
- âœ… ä½¿ç”¨**å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿**
- âœ… ä½¿ç”¨å¤æ•°å½¢å¼ï¼ˆ`actors/` è€Œé `actor/`ï¼‰
- âœ… æè¿°æ€§åç§°ï¼ˆ`enemies/` è€Œé `data/`ï¼‰

**ç¤ºä¾‹**:
```
âœ… scripts/actors/player/
âœ… scripts/managers/
âœ… scripts/ui/
âŒ Scripts/Actors/Player/
âŒ scripts/Manager/
âŒ scripts/data/
```

### è„šæœ¬æ–‡ä»¶å‘½å
- âœ… ä½¿ç”¨**å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿**
- âœ… ç±»åä½¿ç”¨ PascalCaseï¼ˆæ–‡ä»¶åå’Œç±»åå¯¹åº”ï¼‰
- âœ… æè¿°æ€§åç§°

**ç¤ºä¾‹**:
```gdscript
# æ–‡ä»¶å: player_health.gd
class_name PlayerHealth extends Node

# æ–‡ä»¶å: slime_boss.gd
class_name SlimeBoss extends CharacterBody2D
```

### åœºæ™¯æ–‡ä»¶å‘½å
- âœ… ä¸è„šæœ¬åŒåï¼ˆå¦‚æœæœ‰ï¼‰
- âœ… æè¿°æ€§åç§°
- âœ… ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”

**ç¤ºä¾‹**:
```
player.tscn          # å¯¹åº” player.gd
slime_boss.tscn      # å¯¹åº” slime_boss.gd
shop_ui.tscn         # å¯¹åº” shop_ui.gd
```

---

## ğŸ¯ æ–‡ä»¶åˆ†ç±»è§„åˆ™

### 1. è„šæœ¬åˆ†ç±» (`scripts/`)

#### actors/ - è§’è‰²/å®ä½“è„šæœ¬
- **ç”¨é€”**: æ¸¸æˆä¸­çš„ä¸»è¦è§’è‰²ï¼ˆç©å®¶ã€æ•Œäººã€NPCï¼‰
- **åŒ…å«**: ç»§æ‰¿è‡ª CharacterBody2Dã€Area2D çš„è§’è‰²
- **ç¤ºä¾‹**: `player.gd`, `bat.gd`, `shop_keeper.gd`

#### components/ - å¯å¤ç”¨ç»„ä»¶
- **ç”¨é€”**: å¯è¢«å¤šä¸ªå¯¹è±¡å¤ç”¨çš„åŠŸèƒ½æ¨¡å—
- **åŒ…å«**: ç”Ÿå‘½å€¼ç»„ä»¶ã€äº¤äº’åŒºåŸŸã€ä¼¤å®³åŒºåŸŸ
- **ç¤ºä¾‹**: `health_component.gd`, `interaction_area.gd`

#### items/ - é“å…·/ç‰©å“
- **ç”¨é€”**: å¯æ‹¾å–ã€å¯ä½¿ç”¨çš„ç‰©å“
- **åŒ…å«**: é‡‘å¸ã€è¯æ°´ã€æ­¦å™¨ã€é—¨
- **ç¤ºä¾‹**: `coin.gd`, `health_potion.gd`, `sword.gd`

#### managers/ - ç®¡ç†å™¨
- **ç”¨é€”**: ç®¡ç†æ¸¸æˆç³»ç»Ÿ
- **åŒ…å«**: å…³å¡ç®¡ç†ã€éŸ³é¢‘ç®¡ç†ã€ä¿å­˜ç³»ç»Ÿ
- **ç¤ºä¾‹**: `level_manager.gd`, `audio_manager.gd`

#### ui/ - ç”¨æˆ·ç•Œé¢
- **ç”¨é€”**: æ‰€æœ‰UIç›¸å…³è„šæœ¬
- **åŒ…å«**: HUDã€èœå•ã€å¯¹è¯æ¡†
- **ç¤ºä¾‹**: `hud.gd`, `shop_ui.gd`, `chat_bubble.gd`

#### traps/ - é™·é˜±
- **ç”¨é€”**: å…³å¡ä¸­çš„å±é™©ç‰©ä½“
- **åŒ…å«**: åˆºã€è½çŸ³ã€ç§»åŠ¨å¹³å°
- **ç¤ºä¾‹**: `spike.gd`, `falling_block.gd`, `moving_platform.gd`

#### levels/ - å…³å¡è„šæœ¬
- **ç”¨é€”**: å…³å¡é€»è¾‘å’Œæ§åˆ¶
- **åŒ…å«**: å…³å¡åˆå§‹åŒ–ã€äº‹ä»¶è§¦å‘
- **ç¤ºä¾‹**: `shop.gd`, `dungeon.gd`, `boss_arena.gd`

### 2. åœºæ™¯åˆ†ç±» (`scenes/`)

åœºæ™¯æ–‡ä»¶çš„åˆ†ç±»åº”è¯¥ä¸è„šæœ¬åˆ†ç±»ä¿æŒä¸€è‡´ï¼š

```
scenes/
â”œâ”€â”€ actors/        # player/, enemies/, npc/
â”œâ”€â”€ items/         # coins/, potions/, weapons/
â”œâ”€â”€ levels/        # å…³å¡åœºæ™¯
â”œâ”€â”€ traps/         # spike/, platforms/
â””â”€â”€ ui/            # hud/, menus/
```

### 3. èµ„æºåˆ†ç±» (`assets/`)

```
assets/
â”œâ”€â”€ audio/         # sound_effects/, music/
â”œâ”€â”€ textures/      # characters/, items/, tilesets/
â”œâ”€â”€ fonts/         # å­—ä½“æ–‡ä»¶
â””â”€â”€ shaders/       # ç€è‰²å™¨ä»£ç 
```

---

## ğŸ”„ è¿ç§»è§„åˆ™

### å½“å‰é—®é¢˜
- æ ¹ç›®å½•æœ‰å¤§é‡è„šæœ¬æ–‡ä»¶
- Scripts/ å’Œ scenes/ ä¸‹è„šæœ¬é‡å¤
- æ–‡ä»¶åˆ†æ•£ï¼Œéš¾ä»¥ç»´æŠ¤

### è¿ç§»æ­¥éª¤
1. **åˆ›å»ºæ–°çš„æ–‡ä»¶å¤¹ç»“æ„**
2. **ç§»åŠ¨è„šæœ¬æ–‡ä»¶**ï¼ˆä¿æŒåœºæ™¯æ–‡ä»¶ä¸å˜ï¼‰
3. **æ›´æ–°åœºæ™¯æ–‡ä»¶ä¸­çš„è„šæœ¬å¼•ç”¨**
4. **æ›´æ–° autoload é…ç½®**
5. **æµ‹è¯•æ‰€æœ‰åœºæ™¯**

### é‡è¦æ³¨æ„äº‹é¡¹

#### âš ï¸ ä¸è¦ç§»åŠ¨åœºæ™¯æ–‡ä»¶
åœºæ™¯æ–‡ä»¶ï¼ˆ`.tscn`ï¼‰ä¿æŒåŸä½ç½®ï¼Œåªç§»åŠ¨è„šæœ¬æ–‡ä»¶ã€‚

#### âš ï¸ æ›´æ–°è„šæœ¬è·¯å¾„
ç§»åŠ¨è„šæœ¬åï¼Œå¿…é¡»æ›´æ–°åœºæ™¯æ–‡ä»¶ä¸­çš„ `ext_resource` å¼•ç”¨ï¼š

```tscn
# ä¹‹å‰
[ext_resource type="Script" path="res://shop_keeper.gd" id="shop_keeper_script"]

# ä¹‹å
[ext_resource type="Script" path="res://scripts/actors/npc/shop_keeper.gd" id="shop_keeper_script"]
```

#### âš ï¸ æ›´æ–° autoload é…ç½®
å¦‚æœç§»åŠ¨äº† autoload è„šæœ¬ï¼Œéœ€è¦æ›´æ–° `project.godot`ï¼š

```ini
[autoload]
GlobalData="*res://scripts/autoload/global_data.gd"
SaveLoad="*res://scripts/autoload/save_system.gd"
```

---

## ğŸ“‹ å…·ä½“è¿ç§»è®¡åˆ’

### æ ¹ç›®å½•è„šæœ¬ â†’ `scripts/`

| å½“å‰ä½ç½® | æ–°ä½ç½® | è¯´æ˜ |
|---------|--------|------|
| `Global.gd` | `scripts/autoload/global_data.gd` | è‡ªåŠ¨åŠ è½½ |
| `area_2d.gd` | `scripts/components/interaction_area.gd` | äº¤äº’åŒºåŸŸ |
| `box.gd` | `scripts/items/box.gd` | å®ç®± |
| `coco_adventure.gd` | `scripts/levels/coco_adventure.gd` | å…³å¡è„šæœ¬ |
| `door.gd` | `scripts/items/door.gd` | é—¨ |
| `dungeon.gd` | `scripts/levels/dungeon.gd` | å…³å¡è„šæœ¬ |
| `fall_box.gd` | `scripts/traps/falling_box.gd` | é™·é˜± |
| `fall_stone.gd` | `scripts/traps/falling_stone.gd` | é™·é˜± |
| `flying_pig.gd` | `scripts/actors/npc/flying_pig.gd` | NPC |
| `kill_zone.gd` | `scripts/traps/kill_zone.gd` | é™·é˜± |
| `slime_green.gd` | `scripts/actors/enemies/slime_green.gd` | æ•Œäºº |
| `treasure_box.gd` | `scripts/items/treasure_box.gd` | é“å…· |

### Scripts/ å­ç›®å½•é‡ç»„

| å½“å‰ä½ç½® | æ–°ä½ç½® |
|---------|--------|
| `Scripts/HUD.gd` | `scripts/ui/hud.gd` |
| `Scripts/coin.gd` | `scripts/items/coin.gd` |
| `Scripts/chat_bubble.gd` | `scripts/ui/chat_bubble.gd` |
| `Scripts/shop_ui.gd` | `scripts/ui/shop_ui.gd` |
| `Scripts/shop_keeper.gd` | `scripts/actors/npc/shop_keeper.gd` |
| `Scripts/shop.gd` | `scripts/levels/shop.gd` |
| `Scripts/knight.gd` | `scripts/actors/player/knight.gd` |
| `Scripts/start_game.gd` | `scripts/ui/start_menu.gd` |
| `Scripts/health_pot.gd` | `scripts/items/health_potion.gd` |
| `Scripts/sword.gd` | `scripts/items/sword.gd` |
| `Scripts/bat.gd` | `scripts/actors/enemies/bat.gd` |
| `Scripts/bat_spawner.gd` | `scripts/actors/enemies/bat_spawner.gd` |
| `Scripts/slime_purple_boss.gd` | `scripts/actors/enemies/slime_boss.gd` |
| `Scripts/platform_a_active.gd` | `scripts/traps/active_platform.gd` |
| `Scripts/oscar_adventure.gd` | `scripts/levels/oscar_adventure.gd` |
| `Scripts/tools/create_king_animation.gd` | `scripts/utils/create_king_animation.gd` |

### player/ æ–‡ä»¶å¤¹é‡ç»„

| å½“å‰ä½ç½® | æ–°ä½ç½® |
|---------|--------|
| `player/scripts/player.gd` | `scripts/actors/player/player.gd` |
| `player/scripts/player_health.gd` | `scripts/actors/player/player_health.gd` |
| `player/states/*.gd` | `scripts/actors/player/states/*.gd` |

### scenes/ ä¸‹çš„è„šæœ¬

| å½“å‰ä½ç½® | æ–°ä½ç½® |
|---------|--------|
| `scenes/NPC/npc.gd` | `scripts/actors/npc/npc.gd` |
| `scenes/traps/spike.gd` | `scripts/traps/spike.gd` |
| `scenes/traps/waterfall.gd` | `scripts/traps/waterfall.gd` |
| `scenes/boss_01_scene.gd` | `scripts/levels/boss_arena.gd` |

---

## âœ… éªŒè¯æ¸…å•

å®Œæˆè¿ç§»åï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- [ ] æ‰€æœ‰åœºæ™¯æ–‡ä»¶æ­£å¸¸æ‰“å¼€
- [ ] æ‰€æœ‰è„šæœ¬å¼•ç”¨æ­£ç¡®æ›´æ–°
- [ ] autoload é…ç½®æ­£ç¡®
- [ ] æ¸¸æˆå¯ä»¥æ­£å¸¸è¿è¡Œ
- [ ] æ‰€æœ‰å…³å¡æ­£å¸¸åŠ è½½
- [ ] NPCå’Œæ•Œäººæ­£å¸¸å·¥ä½œ
- [ ] UIåŠŸèƒ½æ­£å¸¸

---

## ğŸ¯ ç»´æŠ¤åŸåˆ™

### 1. ä¸€è‡´æ€§åŸåˆ™
- åŒç±»æ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•
- å‘½åé£æ ¼ç»Ÿä¸€
- è„šæœ¬å’Œåœºæ™¯å¯¹åº”

### 2. å¯æŸ¥æ‰¾æ€§
- æŒ‰åŠŸèƒ½åˆ†ç±»ï¼Œä¸æ˜¯æŒ‰å®ç°æ–¹å¼
- ä½¿ç”¨æè¿°æ€§åç§°
- é¿å…æ·±å±‚åµŒå¥—ï¼ˆæœ€å¤š3-4å±‚ï¼‰

### 3. å¯æ‰©å±•æ€§
- ä¸ºæœªæ¥å†…å®¹é¢„ç•™ç©ºé—´
- æ·»åŠ æ–°ç±»å‹æ—¶æ˜ç¡®åˆ†ç±»
- å®šæœŸreviewå’Œé‡æ„

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-02-11
**é€‚ç”¨é¡¹ç›®**: Little Knight Adventure v0.5
